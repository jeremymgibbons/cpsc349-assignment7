{"version":3,"sources":["ws-client.js","app.js","main.js"],"names":["socket","init","url","WebSocket","console","log","registerOpenHandler","handlerFunction","onopen","registerMessageHandler","onmessage","e","data","JSON","parse","sendMessage","payload","send","stringify","ChatApp","ChatMessage","m","message","user","u","timestamp","t","Date","getTime","username","serialize"],"mappings":";AAyBe,aAzBf,IAAIA,EACJ,SAASC,EAAKC,GACVF,EAAS,IAAIG,UAAUD,GACvBE,QAAQC,IAAI,iBAGhB,SAASC,EAAoBC,GACzBP,EAAOQ,OAAS,WACZJ,QAAQC,IAAI,QACZE,KAIR,SAASE,EAAuBF,GAC5BP,EAAOU,UAAY,SAACC,GAChBP,QAAQC,IAAI,UAAWM,EAAEC,MACrBA,IAAAA,EAAOC,KAAKC,MAAMH,EAAEC,MACxBL,EAAgBK,IAIxB,SAASG,EAAYC,GACjBhB,EAAOiB,KAAKJ,KAAKK,UAAUF,IAGhB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACXf,KAAAA,EACAK,oBAAAA,EACAG,uBAAAA,EACAM,YAAAA,GAJW,QAAA,QAAA;;ACOAI,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAhCf,IAAA,EAAA,EAAA,QAAA,gBAgCeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAAAA,SAAAA,EAAAA,EAAAA,GAAAA,KAAAA,aAAAA,GAAAA,MAAAA,IAAAA,UAAAA,qCAAAA,SAAAA,EAAAA,EAAAA,GAAAA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,UAAAA,GAAAA,OAAAA,eAAAA,EAAAA,EAAAA,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,EAAAA,UAAAA,GAAAA,GAAAA,EAAAA,EAAAA,GAAAA,EA9BTC,IAAAA,EA8BSD,WAzBV,SAAA,EAAA,GAHQE,IAAAA,EAATC,EAAAA,QACAC,EAAAA,EAAAA,KAAMC,OAAE,IAAA,EAAA,SAEP,EADDC,EAAAA,EAAAA,UAAWC,OAAG,IAAA,GAAA,IAAIC,MAAQC,UACzB,EAAA,EAAA,KAAA,GACIC,KAAAA,SAAWL,EACXF,KAAAA,QAAUD,EACVI,KAAAA,UAAYC,EAsBNP,OAAAA,EAAAA,EAAAA,CAAAA,CAAAA,IAAAA,YApBD,MAAA,WACH,MAAA,CAACI,KAAM,KAAKA,KACjBD,QAAS,KAAKA,QACdG,UAAW,KAAKA,eAiBPN,EAAAA,GAbTA,EACJ,SAAc,IAAA,EAAA,KAAA,GACLlB,EAAAA,QAAAA,KAAK,uBACLK,EAAAA,QAAAA,oBAAoB,WACrBgB,IAAAA,EAAU,IAAIF,EAAY,CAAEE,QAAS,SAClCP,EAAAA,QAAAA,YAAYO,EAAQQ,eAEtBrB,EAAAA,QAAAA,uBAAuB,SAACG,OAMpBO,EAAAA,EAAAA,QAAAA,QAAAA;;AC/Bf,aADA,IAAA,EAAA,EAAA,QAAA,UACA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,IAAIA,EAAJ","file":"main.js","sourceRoot":"..\\src","sourcesContent":["let socket;\r\nfunction init(url)  {\r\n    socket = new WebSocket(url);\r\n    console.log('connecting...');\r\n}\r\n\r\nfunction registerOpenHandler(handlerFunction) {\r\n    socket.onopen = () => {\r\n        console.log('open');\r\n        handlerFunction();\r\n    };\r\n}\r\n\r\nfunction registerMessageHandler(handlerFunction) {\r\n    socket.onmessage = (e) => {\r\n        console.log('message', e.data);\r\n        let data = JSON.parse(e.data);\r\n        handlerFunction(data);\r\n    };\r\n}\r\n\r\nfunction sendMessage(payload) {\r\n    socket.send(JSON.stringify(payload));\r\n}\r\n\r\nexport default {\r\n    init,\r\n    registerOpenHandler,\r\n    registerMessageHandler,\r\n    sendMessage\r\n}","import socket from './ws-client';\r\n\r\nclass ChatMessage {\r\n  constructor({\r\n    message: m,\r\n    user: u='batman',\r\n    timestamp: t=(new Date()).getTime()\r\n  }) {\r\n    this.username = u;\r\n    this.message = m;\r\n    this.timestamp = t;\r\n  }\r\n  serialize() {\r\n    return {user: this.user,\r\n      message: this.message,\r\n      timestamp: this.timestamp};\r\n    }\r\n  }\r\n\r\nclass ChatApp {\r\n  constructor() {\r\n    socket.init('ws://localhost:3001');\r\n    socket.registerOpenHandler(() => {\r\n      let message = new ChatMessage({ message: 'pow!' });\r\n      socket.sendMessage(message.serialize());\r\n    });\r\n    socket.registerMessageHandler((data) => {\r\n      // console.log(data);\r\n    });\r\n  }\r\n}\r\n\r\nexport default ChatApp;\r\n","import ChatApp from './app';\r\nnew ChatApp();"]}